################################################################################
#
# Base image. Contains all third-party dependencies
#
################################################################################

FROM $BASE_IMAGE as base

ARG DEBIAN_FRONTEND=noninteractive
ARG BLAS_TARGET_CPU=""

# OpenBLAS
ADD ./third-party/OpenBLAS /atom/third-party/OpenBLAS
RUN cd /atom/third-party/OpenBLAS \
  && make TARGET=${BLAS_TARGET_CPU} -j8 \
  && make PREFIX=/usr/local install
